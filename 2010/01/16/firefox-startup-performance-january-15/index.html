<!doctype html>
<html lang="en">
  <head>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<title>Firefox Startup Performance - January 15</title>
  	<meta name="description" content="website de dietrich ayala">
  	<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="dietrich">
  	
  	<style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #082840;
	--text-color-link-active: #5f2b48;
	--text-color-link-visited: #17050F;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
main :first-child {
	margin-top: 0;
}

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
}
pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-all;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
  display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	list-style: none;
	padding: 0;
	padding-left: 1.5rem;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	content: "" counter(start-from, decimal-leading-zero) ". ";
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	padding-left: .25em;
	padding-right: .5em;
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	text-transform: capitalize;
	font-style: italic;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}
/* Customizations */
.nav {
  display: flex;  
  flex-wrap: wrap;
}
.nav-item {
  /*display: inline-block;*/
  /*margin-right: 0.3em;*/
  text-wrap: nowrap;
}

/* Post layout - rehome to post section? */
.post-container {
  display: flex;
  justify-content: center;
}
.post-content {
  max-width: 40rem;
  min-width: 0;
}
.postlist-item:before {
  content: none;
}
.postlist-date {
  margin-right: 0.5em;
}

header {
	border-bottom: none;
}

/* Color mode management */
/*
body {
  color: var(--darkgray);
  background-color: var(--white);
}
a[href] {
  color: var(--blue);
}
a[href]:visited {
  color: var(--navy);
}
.postlist-date,
.postlist-item:before {
  color: var(--darkgray);
}
.post-tag {
  color: var(--darkgray);
  border-color: var(--gray);
}
a[href].post-tag:hover,
a[href].post-tag:focus {
  background-color: var(--lightgray);
}
@media (prefers-color-scheme: dark) {
  body {
    color: var(--text-color);
    background-color: var(--color-gray-90);
  }
  a[href] {
    color: var(--white);
  }
  a[href]:visited {
    color: var(--lightgray);
  }
  .postlist-date,
  .postlist-item:before {
    color: var(--darkgray);
  }
  .post-tag {
    color: var(--darkgray);
    border-color: var(--gray);
  }
  a[href].post-tag:hover,
  a[href].post-tag:focus {
    background-color: var(--lightgray);
  }
}
*/</style>
  </head>
  <body>
  	<a href="#skip" class="visually-hidden">Skip to main content</a>

  	<header>
  		<a href="/" class="nav-item">dietrich</a>
  		<nav>
  			<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
  			<ul class="nav">
  				<li class="nav-item"><a href="/posts/">blog</a></li>
  				<li class="nav-item"><a href="/about/">about</a></li>

          <li class="nav-item">
            <a href="mailto:me@burrito.space" target="_blank">email</a>
          </li>
          <li class="nav-item">
            <a href="https://bsky.app/profile/burrito.space" target="_blank" title="bluesky" rel="me">ü¶ã bluesky</a>
          </li>
          <li class="nav-item">
            <a href="https://signal.me/#eu/JgYm3GJ64TGkbg9r3RHPBeuowAO5eNAoi9kqELN2XGWX6-eJpzdMVbGAmXCy4BvK" target="_blank" title="signal" rel="me">signal</a>
          </li>
          <li class="nav-item">
            <a href="https://discord.com/users/364757227833131011" target="_blank" title="discord" rel="me">discord</a>
          </li>
          <li class="nav-item">
            <a href="https://t.me/dietricha" target="_blank" title="telegram" rel="me">telegram</a>
          </li>
          <li class="nav-item">
            <a href="https://github.com/autonome" target="_blank" title="github" rel="me">github</a>
          </li>
          <li class="nav-item">
            <a href="https://www.linkedin.com/in/dietrich" target="_blank" title="linkedin" rel="me">linkedin</a>
          </li>
  			</ul>

  		</nav>
  	</header>

  	<main id="skip">
  		<heading-anchors>
  			
<h1 id="firefox-startup-performance-january-15">Firefox Startup Performance - January 15</h1>

<ul class="post-metadata">
	<li><time datetime="2010-01-16">16 January 2010</time></li>
	<li><a href="/tags/firefox/" class="post-tag">firefox</a>, </li>
	<li><a href="/tags/mozilla/" class="post-tag">mozilla</a>, </li>
	<li><a href="/tags/performance/" class="post-tag">performance</a>, </li>
	<li><a href="/tags/startup/" class="post-tag">startup</a></li>
</ul>

<p>Happy 2010 everyone!</p>
<p>Top Startup Bugs</p>
<!-- table\#ts \{ border: 1px solid silver; \} -->
<table id="ts" border="1" cellspacing="0" cellpadding="2">
<tbody>
<tr>
<td class="s0">Estimated win</td>
<td class="s1">Bug \#</td>
<td class="s1">Summary</td>
<td class="s1">Owner</td>
<td class="s1">Status</td>
<td class="s1">Notes</td>
</tr>
<tr>
<td class="s2">>10\%</td>
<td class="s3">[512584](https://bugzilla.mozilla.org/show_bug.cgi?id=512584)</td>
<td class="s4">Super fast paths for Components.classes and Components.interfaces</td>
<td class="s4">Taras Glek</td>
<td class="s4">in progress</td>
<td>Taras is traveling, says he'll close it out when he returns.</td>
</tr>
<tr>
<td class="s2">>10\%</td>
<td class="s3">[525013](https://bugzilla.mozilla.org/show_bug.cgi?id=525013)</td>
<td class="s4">Investigate a more static build configuration of Firefox</td>
<td class="s4">Joel Reymont</td>
<td class="s4">in progress</td>
<td class="s4">Lots of progress! Joel has a patch for Mac and Linux working on the tryserver, and numbers to confirm a partial static build gets ~8\% improvement on Mac, with no compat problems. Zach added a bunch of number crunching to validate Joel's numbers. On the Windows front, Taras has a patch in progress now.</td>
</tr>
<tr>
<td class="s2">up to 25\%</td>
<td class="s3">[514083](https://bugzilla.mozilla.org/show_bug.cgi?id=514083)</td>
<td class="s4">Per-file HFS+ compression on Mac OSX 10.6</td>
<td class="s4">Joel Reymont</td>
<td class="s4">in progress</td>
<td class="s4">Conclusion is that we need to make this happen via the installer, as well as the updater, since modifying files results in decompression. Need to find an owner for this still.</td>
</tr>
<tr>
<td class="s2">TBD</td>
<td class="s3">[520309](https://bugzilla.mozilla.org/show_bug.cgi?id=520309)</td>
<td class="s4">Startup cache: replacement for fastload cache</td>
<td class="s4">Ben Hsieh</td>
<td class="s4">in progress</td>
<td class="s4">Ben is looking into a perf regression that arose after some major changes.</td>
</tr>
<tr>
<td class="s2">TBD</td>
<td class="s3">[503483](https://bugzilla.mozilla.org/show_bug.cgi?id=503483)</td>
<td class="s4">Turn on --enable-faststart for Firefox by default</td>
<td class="s4">Dietrich</td>
<td class="s4">needs testing</td>
<td class="s4">No update, need to test still. Maybe just push on Windows here.</td>
</tr>
<tr>
<td class="s2">TBD</td>
<td class="s3">[513149](https://bugzilla.mozilla.org/show_bug.cgi?id=513149)</td>
<td class="s4">Speed up CSS parsing by using a machine generated lexer</td>
<td class="s4">Zack Weinberg</td>
<td class="s4">Zack's blocked on other work</td>
<td class="s4">No update.Taras says about 6\% of startup spent parsing CSS.</td>
</tr>
</tbody>
</table>
Other activity this week:
<ul>
<li>
<p>I updated Mark's patch in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=507012">bug 507012</a> to trunk and ran it on Windows. Here is the <a href="http://spreadsheets.google.com/pub?key=t98ryMyoZx3Su0Pw7wz0anQ&amp;output=html">ranked log</a> and the <a href="http://people.mozilla.org/~dietrich/startup-js-win.txt">stack view</a>. From perusing this data, I filed <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=539997">bug 539997</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=539991">bug 539991</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=539869">bug 539869</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=539870">bug 539870</a>.</p>
</li>
<li>
<p>I've been working on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506471">bug 506471</a>, to move FUEL out of the startup path, and also making a bunch of minor improvements and cleanup in that code.</p>
</li>
<li>
<p>While I was gone, Rob Strong <a href="http://blog.mozilla.com/rstrong/2009/12/23/firefox-javascript-component-startup-costs/">put up a great post</a> about what JS components are in the startup path and how much time they take up.
Projects in a holding pattern:</p>
</li>
<li>
<p>More investigation into Hunspell changes in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=468779">bug  468799</a>, possibly incorporating some changes Chrome made.</p>
</li>
<li>
<p>Ryan Flint has a WIP patch to minify JS on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=524858">bug  524858</a> that significantly reduces the size of shipped JavaScript  files.</p>
</li>
<li>
<p>JARification: David abandoned <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=509755">moving JS          modules into a JAR file</a>, since those files are fastloaded.         However, since we want things like post-extension-install  restarts  to   be     fast, and those cause fastload cache invalidation,  we might   want  to   do   things like this anyways. I filed a bug for  the same   treatment  for     components. These are lower priority,  since they're   not the  normal     startup case. Follow along with all  JAR-ification   via<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513027"> the         tracker  bug</a>.</p>
</li>
<li>
<p>Startup Timeline: No updates, still not landed. Add [ft] in the        whiteboard of your bug w/ the function names you want timed and David        will generate it and update the bug.</p>
</li>
<li>
<p>Static Analysis: No progress on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506128">bug        506128</a>.  David needs to file a bug with the final log of        named-yet-uncalled  functions.</p>
</li>
<li>
<p>Dirty Profile Testing: No progress. We have <a href="https://wiki.mozilla.org/Firefox/Sprints/Startup_Time_Improvements#Test_Coverage">a list of test scenarios</a>, still need to file        bugs  for each, generate Talos config patches and profile data, and    then     move  it into Rel-Eng territory. Also, need to get a separate       Tinderbox  tree,  since it's going to cause a bazillion new  columns.</p>
</li>
<li>
<p><a href="http://wagerlabs.com/">Joel        Reymont</a> noted in<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513076"> bug        513076</a> that there are serious drawbacks to getting our libraries  in       the dyld  shared cache on Mac, so has deprioritized that work.
As usual, more details and links are  available on <a href="https://wiki.mozilla.org/Firefox/Projects/Startup_Time_Improvements">the       project wiki</a>, and we're available to answer questions in <a href="irc://irc.mozilla.org/#startup">#startup on irc.mozilla.org</a>.</p>
</li>
</ul>

<ul class="links-nextprev"><li class="links-nextprev-prev">‚Üê Previous<br> <a href="/2009/12/19/firefox-startup-performance-dec-18/">Firefox Startup Performance - Dec 18</a></li><li class="links-nextprev-next">Next ‚Üí<br><a href="/2010/01/22/firefox-3-6-performance-startup-and-snappiness-improvements/">Firefox 3.6 Performance: Startup and Snappiness Improvements</a></li>
</ul>

  		</heading-anchors>
  	</main>

  	<footer>
  		<p><em>Built with <a href="https://www.11ty.dev/">Eleventy v3.0.0</a></em></p>
  	</footer>

  	<!-- This page `/2010/01/16/firefox-startup-performance-january-15/` was built on 2025-02-07T17:44:10.088Z -->
  	<script type="module" src="/dist/xbxy_EL6cU.js"></script>
  </body>
</html>
