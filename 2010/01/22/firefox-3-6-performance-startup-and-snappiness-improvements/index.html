<!doctype html>
<html lang="en">
  <head>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<title>Firefox 3.6 Performance: Startup and Snappiness Improvements</title>
  	<meta name="description" content="website de dietrich ayala">
  	<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="dietrich">
  	
  	<style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #082840;
	--text-color-link-active: #5f2b48;
	--text-color-link-visited: #17050F;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 40em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
main :first-child {
	margin-top: 0;
}

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
}
pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-all;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
  display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	list-style: none;
	padding: 0;
	padding-left: 1.5rem;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	content: "" counter(start-from, decimal-leading-zero) ". ";
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	padding-left: .25em;
	padding-right: .5em;
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	text-transform: capitalize;
	font-style: italic;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}
/* Customizations */
.nav {
  display: flex;  
  flex-wrap: wrap;
}
.nav-item {
  /*display: inline-block;*/
  /*margin-right: 0.3em;*/
  text-wrap: nowrap;
}

/* Post layout - rehome to post section? */
.post-container {
  display: flex;
  justify-content: center;
}
.post-content {
  max-width: 40rem;
  min-width: 0;
}
.postlist-item:before {
  content: none;
}
.postlist-date {
  margin-right: 0.5em;
}

header {
	border-bottom: none;
}

/* Color mode management */
/*
body {
  color: var(--darkgray);
  background-color: var(--white);
}
a[href] {
  color: var(--blue);
}
a[href]:visited {
  color: var(--navy);
}
.postlist-date,
.postlist-item:before {
  color: var(--darkgray);
}
.post-tag {
  color: var(--darkgray);
  border-color: var(--gray);
}
a[href].post-tag:hover,
a[href].post-tag:focus {
  background-color: var(--lightgray);
}
@media (prefers-color-scheme: dark) {
  body {
    color: var(--text-color);
    background-color: var(--color-gray-90);
  }
  a[href] {
    color: var(--white);
  }
  a[href]:visited {
    color: var(--lightgray);
  }
  .postlist-date,
  .postlist-item:before {
    color: var(--darkgray);
  }
  .post-tag {
    color: var(--darkgray);
    border-color: var(--gray);
  }
  a[href].post-tag:hover,
  a[href].post-tag:focus {
    background-color: var(--lightgray);
  }
}
*/</style>
  </head>
  <body>
  	<a href="#skip" class="visually-hidden">Skip to main content</a>

  	<header>
  		<a href="/" class="nav-item">dietrich</a>
  		<nav>
  			<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
  			<ul class="nav">
  				<li class="nav-item"><a href="/posts/">blog</a></li>
  				<li class="nav-item"><a href="/about/">about</a></li>

          <li class="nav-item">
            <a href="mailto:me@burrito.space" target="_blank">email</a>
          </li>
          <li class="nav-item">
            <a href="https://bsky.app/profile/burrito.space" target="_blank" title="bluesky" rel="me">ü¶ã bluesky</a>
          </li>
          <li class="nav-item">
            <a href="https://signal.me/#eu/JgYm3GJ64TGkbg9r3RHPBeuowAO5eNAoi9kqELN2XGWX6-eJpzdMVbGAmXCy4BvK" target="_blank" title="signal" rel="me">signal</a>
          </li>
          <li class="nav-item">
            <a href="https://discord.com/users/364757227833131011" target="_blank" title="discord" rel="me">discord</a>
          </li>
          <li class="nav-item">
            <a href="https://t.me/dietricha" target="_blank" title="telegram" rel="me">telegram</a>
          </li>
          <li class="nav-item">
            <a href="https://github.com/autonome" target="_blank" title="github" rel="me">github</a>
          </li>
          <li class="nav-item">
            <a href="https://www.linkedin.com/in/dietrich" target="_blank" title="linkedin" rel="me">linkedin</a>
          </li>
  			</ul>

  		</nav>
  	</header>

  	<main id="skip">
  		<heading-anchors>
  			
<h1 id="firefox-3-6-performance-startup-and-snappiness-improvements">Firefox 3.6 Performance: Startup and Snappiness Improvements</h1>

<ul class="post-metadata">
	<li><time datetime="2010-01-22">22 January 2010</time></li>
	<li><a href="/tags/firefox/" class="post-tag">firefox</a>, </li>
	<li><a href="/tags/firefox3-6/" class="post-tag">firefox3.6</a>, </li>
	<li><a href="/tags/mac/" class="post-tag">mac</a>, </li>
	<li><a href="/tags/mozilla/" class="post-tag">mozilla</a>, </li>
	<li><a href="/tags/performance/" class="post-tag">performance</a>, </li>
	<li><a href="/tags/startup/" class="post-tag">startup</a></li>
</ul>

<p><a href="http://bit.ly/blogfx36">Firefox 3.6 was released today</a>! For me, the most important changes in this release are the performance and stability improvements. On Mac especially, there are some big improvements in startup time, yielding up to 30% faster startup generally. And on both Mac and Windows, we fixed some pathologically bad startup scenarios.</p>
<p>The list of bugs fixed that specifically affect startup time is <a href="http://bit.ly/5t9fA9">here</a>, however a few should be called out individually:</p>
<ul>
<li>
<p><a href="http://ted.mielczarek.org/">Ted Mielczarek</a> and <a href="http://blog.mozilla.com/adw/">Drew Willcoxon</a> <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=463605">combined all .xpt files into a single one</a>, reducing the number of files read from the disk at startup.</p>
</li>
<li>
<p><a href="http://blog.mozilla.com/rstrong/">Rob Strong</a> <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=471219">removed the need for services to load at startup for timer registration</a>, reducing the number of files read from disk at startup, as well as reducing the amount of JavaScript executed. There are still services that need to be ported to this new scheme, so expect more improvements here.</p>
</li>
<li>
<p><a href="http://blog.vlad1.com/">Vlad Vukicevic</a> found that on Mac it could <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506470">take up to a whole second to initialize Growl</a>, if present. His fix initializes Growl on demand.</p>
</li>
<li>
<p><a href="http://wagerlabs.com/">Joel Reymont</a> found that up to 10% of startup time on Mac was in the initialization of fonts. <a href="http://blog.mozilla.com/nattokirai/">John Daggett</a> and Jonathan Kew <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=517045">did some great work to reduce the problem in Firefox 3.6</a>. They subsequently <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=519445">modified font loading on Mac to occur on-demand</a>, so the next release will be even faster.</p>
</li>
<li>
<p>Joel also found that up to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=517549">12% of startup on Mac was spent in some APIs that were only needed for debugging</a>. The problem was quickly fixed by Masayuki Nakano.</p>
</li>
<li>
<p><a href="http://blog.mozilla.com/tglek/">Taras Glek</a> and Alfred Kayser spent a bunch of time <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=504864">improving the performance of how JARs are loaded and read from</a>. The infrastructure improvements made are paying off as we move more groups of small files into these archives, reducing the number of individual file operations that occur at startup time.</p>
</li>
<li>
<p>On Windows, it was found that <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=501605">a large portion of startup time was spent in the security libraries</a>, building up entropy by trawling through IE's cache folder and the Windows temp directory. Some Windows users reported upwards of 25k files in their temp directories, so you can imagine the delays that this behavior was causing for some users. The behavior is now fixed.
The full list of bugs fixed in Firefox 3.6 with the &quot;perf&quot; keyword is <a href="http://bit.ly/7Y6gqE">here</a>. These range from improvements to web page loading times, general UI responsiveness, and improvements to specific UI actions such as searching History and Bookmarks:</p>
</li>
<li>
<p>One of the biggest improvements is that <a href="http://shawnwilsher.com/">Shawn Wilsher</a> ported all of the Awesomebar code to JavaScript and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=455555">moved the queries that build up the results to a background thread</a>. This resulted in a massive improvement in UI responsiveness when typing in the location bar.</p>
</li>
<li>
<p>Another infrastructural improvement that will affect general responsiveness is <a href="http://blog.bonardo.net/">Marco Bonardo</a>'s work to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=512854">clean up the bookmarks and history database periodically</a>.</p>
</li>
<li>
<p>Per-tab-network-prioritization is the long way of saying that Firefox will prioritize the network traffic of pages you are currently interacting with. <a href="http://zpao.com/articles/22-per_tab_network_prioritization">Paul O'Shannessy explains the feature here</a>, and was able to <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=514490">finish it up in time to make 3.6</a>.</p>
</li>
<li>
<p>Finally, there are a TON of performance improvements to the JavaScript engine, which benefit just about every area of the browser, from startup time to page loading to extensions. <a href="http://blog.mozilla.com/dmandelin/">Dave Mandelin</a> put up <a href="http://hacks.mozilla.org/2010/01/javascript-speedups-in-firefox-3-6/">a detailed post on Hacks.Mozilla.org</a> last week that explains it all.
And all of this is just a taste of what's to come: Over 60% of the bugs fixed as part of our focus on startup performance have landed on trunk, but didn't make it in time for the 3.6 release. You can follow along on the <a href="https://wiki.mozilla.org/Firefox/Projects/Startup_Time_Improvements">wiki page for the startup project</a>, and here on my blog, where I post status updates every Friday.</p>
</li>
</ul>

<ul class="links-nextprev"><li class="links-nextprev-prev">‚Üê Previous<br> <a href="/2010/01/16/firefox-startup-performance-january-15/">Firefox Startup Performance - January 15</a></li><li class="links-nextprev-next">Next ‚Üí<br><a href="/2010/01/23/firefox-startup-performance-january-22/">Firefox Startup Performance - January 22</a></li>
</ul>

  		</heading-anchors>
  	</main>

  	<footer>
  		<p><em>Built with <a href="https://www.11ty.dev/">Eleventy v3.0.0</a></em></p>
  	</footer>

  	<!-- This page `/2010/01/22/firefox-3-6-performance-startup-and-snappiness-improvements/` was built on 2025-02-07T17:44:10.088Z -->
  	<script type="module" src="/dist/xbxy_EL6cU.js"></script>
  </body>
</html>
