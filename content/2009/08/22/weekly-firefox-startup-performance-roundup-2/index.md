---
title: "Weekly Firefox Startup Performance Roundup"
published_at: 2009-08-22
date: 2009-08-22
tags: ["firefox", "mozilla", "performance", "startup", "posts"]
---
\#\# Progress

*   [Enabling PGO for SQLite, mozStorage and Places](https://bugzilla.mozilla.org/show_bug.cgi?id=419893): Found that the trunk unit test boxes have PGO disabled. I'm leery of checking this in without it being properly tested because these components handle so much user data. Next steps: [Lukas Blakk](http://backinblakk.blogspot.com/) is working on the infrastructure [to enable unit-testing of PGO builds](https://bugzilla.mozilla.org/show_bug.cgi?id=486783).
*   [JS Component  Combining](https://bugzilla.mozilla.org/show_bug.cgi?id=507038): The combined 60,000 line JS file (!!!) has a problem somewhere  in there, causing component registration to fail about 2/3 of the way through. Next steps: Get all the components registering, get numbers on  a few platforms to gauge the effect.
*   [Startup Timeline](https://bugzilla.mozilla.org/show_bug.cgi?id=480735): No progress. Vlad said it was land-able, earlier in the week. Next steps: Figure out what needs to happen here to finalize and land. David needs to un-rot the instrumentation patch once the timeline lands (rots quickly).
*   [XPT Linking](https://bugzilla.mozilla.org/show_bug.cgi?id=510309): Landed! However, really only helps cold startup, which we don't currently measure. Next steps: Once cold startup testing is available, disable and re-enable to get actual numbers on the effect.
*   [Static  Analysis](https://bugzilla.mozilla.org/show_bug.cgi?id=506128): No progress, David was out part of the week, and was  working on unblocking the dirty profile tests (details below). Next  steps: Reduce false positives in the dead-code finder, and run against  the full browser context.
*   [Dirty Profile Testing](https://bugzilla.mozilla.org/show_bug.cgi?id=414660): Due to a ton of hard work from Alice, dirty profiling of Ts was enabled on mozilla-central! They are the boxes suffixed "dirty" on the tree, currently testing Ts and Ts-shutdown for profiles with small and medium places.sqlite files on all platforms. Data is available for these tests on the graph server - you can see the effect of Vlad's landing of [bug 506470](https://bugzilla.mozilla.org/show_bug.cgi?id=506470) on startup for a profile with a medium-sized places.sqlite file on [this graph](http://graphs.mozilla.org/\#tests=[\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22170\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22171\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22172\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22173\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22174\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22175\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22176\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22177\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22178\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22179\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22181\%22\},\{\%22test\%22:\%2253\%22,\%22branch\%22:\%221\%22,\%22machine\%22:\%22182\%22\}]). Next steps: get various other dirty profile scenarios detailed, file bugs and get in the pipe. Figure out tree pollution issues.
*   [Cold-startup Testing](https://bugzilla.mozilla.org/show_bug.cgi?id=510587): Ts throws out the max value of it's ten runs, so we don't have a measurement of how long browser takes to initially startup. Drew, with help from Alice, has started working on the Talos changes necessary to get this measurement up and running. We've got [methods for simulated cold startup](https://wiki.mozilla.org/Firefox/Sprints/Startup_Time_Improvements\#Tips.2C_Tools) from Vlad, Rob Arnold and others[](https://wiki.mozilla.org/Firefox/Projects/Startup_Time_Improvements_Notes\#Rob_Arnold_notes_on_simulated_cold_startup_on_Windows). Next steps: Implement support for head/tail scripts for Talos tests, write those scripts for cold startup for all platforms, hand off to rel-eng for deployment.
*   [Joel  Reymont](http://wagerlabs.com/) started working on Firefox performance on Mac, and posted [a  comparison of dynamic linking time for Firefox and Safari](http://wagerlabs.com/post/168237170/faster-mac-firefox), and started [posting notes on his methodology on the wiki](https://wiki.mozilla.org/Firefox/Projects/Startup_Time_Improvements/joelr_notes).
*   [Vlad](http://blog.vlad1.com/) landed [bug 506470](https://bugzilla.mozilla.org/show_bug.cgi?id=506470), which delays the initialization of Growl on Mac, winning 7.5\% on Ts. As seen above, it's a win on dirty profiles without Growl as well as regular Ts (empty profile).
*   [Taras Glek posted](http://blog.mozilla.com/tglek/2009/08/20/cleaning-up-startup-disk-io/\#more-173) a summary of ways to spend less time in disk IO at startup, the performance characteristics of IO on restricted devices, and a log of files opened at startup.

\#\# Further Reading

*   [Startup Project wiki](https://wiki.mozilla.org/Firefox/Sprints/Startup_Time_Improvements)
*   [Drew's post for this week](http://blog.mozilla.com/adw/2009/08/21/firefox-startup-2/)
*   Taras' post [listing files opened on startup](http://blog.mozilla.com/tglek/2009/08/20/cleaning-up-startup-disk-io/\#more-173)
[UPDATE: Added Taras' post, and a link to Joel's notes.]