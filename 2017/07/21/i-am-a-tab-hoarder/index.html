<!doctype html>
<html lang="en">
  <head>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<title>The New Firefox and Ridiculous Numbers of Tabs</title>
  	<meta name="description" content="website de dietrich ayala">
  	<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="dietrich likes to do stuff">
  	
  	<style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #082840;
	--text-color-link-active: #5f2b48;
	--text-color-link-visited: #17050F;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 100%;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
main :first-child {
	margin-top: 0;
}

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
}
pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-all;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
  display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	list-style: none;
	padding: 0;
	padding-left: 1.5rem;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	content: "" counter(start-from, decimal-leading-zero) ". ";
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	padding-left: .25em;
	padding-right: .5em;
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	text-transform: capitalize;
	font-style: italic;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}
/* Customizations */
.nav {
  display: flex;  
  flex-wrap: wrap;
}
.nav-item {
  /*display: inline-block;*/
  /*margin-right: 0.3em;*/
  text-wrap: nowrap;
}

/* Post layout - rehome to post section? */
.post-container {
  display: flex;
  justify-content: center;
}
.post-content {
  max-width: 40rem;
  min-width: 0;
}
.postlist-item:before {
  content: none;
}
.postlist-date {
  margin-right: 0.5em;
}

header {
	border-bottom: none;
}
header > .nav-item {
	font-size: 1.5em;
	font-weight: 700;
	text-wrap: wrap;
}
header > .nav-item:link,
header > .nav-item:visited {
	color: var(--text-color);
	text-decoration: none;
}

/* Home page 4-column grid */
.home-grid {
  display: grid;
  grid-template-columns: 8rem 1fr 1fr 1fr;
  gap: 2rem;
  padding: 0;
}
main:has(.home-grid) {
  padding-left: 1em;
  padding-right: 1em;
}

.home-grid h2 {
  margin-top: 0;
}

/* Contact column */
.contact-list {
  list-style: none;
  padding: 0;
}
.contact-list li {
  margin-bottom: 0.5em;
}

/* Talks column */
.talks-list {
  list-style: none;
  padding: 0;
}
.talks-list li {
  margin-bottom: 0.5em;
  line-height: 1.4;
}
.talks-venue {
  display: block;
  font-size: 0.85em;
  color: var(--color-gray-50);
}
.col-talks h3 {
  margin-bottom: 0.5em;
  margin-top: 1.2em;
}
.col-talks h3:first-of-type {
  margin-top: 0;
}

/* Blog column */
.col-blog .postlist {
  padding-left: 0;
}
.col-blog .postlist-item {
  margin-bottom: 0.75em;
}
.col-blog .postlist-link {
  font-size: 1em;
  flex-basis: 100%;
  padding-left: 0;
}

/* Mobile nav items - hidden on desktop */
.mobile-nav-item {
  display: none;
}

@media (max-width: 768px) {
  .home-grid {
    grid-template-columns: 1fr;
  }
  .contact-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5em 1em;
  }
  .contact-list li {
    margin-bottom: 0;
  }
  .col-contact h2 {
    margin-bottom: 0;
  }
  .col-contact {
    margin-bottom: -1.5rem;
  }
  .col-talks,
  .col-blog {
    display: none;
  }
  .mobile-nav-item {
    display: inline-block;
  }
}

/* Color mode management */
/*
body {
  color: var(--darkgray);
  background-color: var(--white);
}
a[href] {
  color: var(--blue);
}
a[href]:visited {
  color: var(--navy);
}
.postlist-date,
.postlist-item:before {
  color: var(--darkgray);
}
.post-tag {
  color: var(--darkgray);
  border-color: var(--gray);
}
a[href].post-tag:hover,
a[href].post-tag:focus {
  background-color: var(--lightgray);
}
@media (prefers-color-scheme: dark) {
  body {
    color: var(--text-color);
    background-color: var(--color-gray-90);
  }
  a[href] {
    color: var(--white);
  }
  a[href]:visited {
    color: var(--lightgray);
  }
  .postlist-date,
  .postlist-item:before {
    color: var(--darkgray);
  }
  .post-tag {
    color: var(--darkgray);
    border-color: var(--gray);
  }
  a[href].post-tag:hover,
  a[href].post-tag:focus {
    background-color: var(--lightgray);
  }
}
*/</style>
  </head>
  <body>
  	<a href="#skip" class="visually-hidden">Skip to main content</a>

  	<header>
  		<a href="/" class="nav-item">dietrich likes to do stuff</a>
  		<nav>
  			<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
  			<ul class="nav">
  				<li class="nav-item"><a href="/posts/">blog</a></li>
  				<li class="nav-item"><a href="/about/">about</a></li>
  				<li class="nav-item mobile-nav-item"><a href="https://autonome.github.io/elephant/">talks</a></li>
  			</ul>

  		</nav>
  	</header>

  	<main id="skip">
  		<heading-anchors>
  			
<h1 id="the-new-firefox-and-ridiculous-numbers-of-tabs">The New Firefox and Ridiculous Numbers of Tabs</h1>

<ul class="post-metadata">
	<li><time datetime="2017-07-21">21 July 2017</time></li>
	<li><a href="/tags/firefox/" class="post-tag">firefox</a>, </li>
	<li><a href="/tags/performance/" class="post-tag">performance</a>, </li>
	<li><a href="/tags/tabs/" class="post-tag">tabs</a></li>
</ul>

<p><picture><source type="image/avif" srcset="/2017/07/21/i-am-a-tab-hoarder/TurzVMwA_p-1857.avif 1857w"><source type="image/webp" srcset="/2017/07/21/i-am-a-tab-hoarder/TurzVMwA_p-1857.webp 1857w"><img loading="lazy" decoding="async" src="/2017/07/21/i-am-a-tab-hoarder/TurzVMwA_p-1857.png" alt="Tabs!" width="1857" height="827"></picture></p>
<p>I've got a Firefox profile with 1691 tabs.</p>
<p>I started trying to write down why, but gave up for now. It was becoming an overly long exploration of product design and the future of the web.</p>
<p>It's Friday. Let's keep things simple.</p>
<p>As you would expect, Firefox handled this profile quite poorly for a long time. I got used to multi-minute startup time, waiting 15-30 seconds for tabs from external apps to show up, and all manner of non-responsive behavio(u)r.</p>
<p>And then, quite recently, everything changed.</p>
<p>## Quantum Flow</p>
<p>Right now, more effort is being put into making Firefox fast than I've seen since... well, since I've been working on Firefox. And I've been at Mozilla for more than a decade.</p>
<p>Part of this effort is a project called Quantum Flow - a bunch of engineers making changes that directly impact Firefox responsiveness. To learn more and follow along with these efforts, read <a href="https://ehsanakhgari.org/tag/quantumflow">Ehsan Akhgari's weekly posts</a>.</p>
<p>A lot of the improvement in this particular scenario is from Kevin Jones' work on bringing the overall cost of unloaded tabs as close to zero as possible. While the major work has landed, the work continues in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=906076">Bug 906076</a>. Huge amounts of thanks for the recent wins for us pathological tab hoarders go to Kevin, DÃ£o Gottwald, Mike de Boer, Tim Taubert, David Teller, Mike Conley, and Gijs Kruitbosch.</p>
<p>## Test Scenario</p>
<p>I took my 1691 tab browser profile, and did a wall-clock measurement of start-up time and memory use for Firefox versions 20, 30, 40, and 50 through 56.</p>
<p>These are my personal results. You might not get the same results. If you test 1691 (or even 1692) tabs and find something totally different, I'd love to hear about it.</p>
<p>Notes:</p>
<ul>
<li>
<p>I shut down most things on my Macbook (yeah the little one that's more like a glorified iPad).</p>
</li>
<li>
<p>I turned off wifi. This is a measurement of Firefox, not the network, nor web page rendering.</p>
</li>
<li>
<p>I measured by eyeball, using &quot;time cat&quot; on the command line. This might seem weird, but c'mon - I'm measuring <em>minutes</em>. Microsecond precision is not required.</p>
</li>
<li>
<p>I measured startup time five times, dropping highs and lows. Even that wasn't really necessary - the times were <em>startingly consistent</em>. With almost 1700 tabs and &gt;5 minute startup, the standard deviation was negligible.</p>
</li>
<li>
<p>For measuring startup time, I killed the timer when the &quot;server not found&quot; page finished being rendered in the active tab. After lots of testing, I consistently found this to be the point at which the application as a whole became responsive and usable.</p>
</li>
<li>
<p>For memory, I waited for one minute after the startup measurement point and then grabbed the total value from the bottom of about:memory. I waited one minute, because I observed a consistent spike in memory after startup which went away within the first minute and then stabilized for a long period after. It's all kinds of initialization that doesn't need to block the app from starting, but needs to happen once you get to browsing.</p>
</li>
<li>
<p>I tested Firefox versions 20, 30, 40, and 50 through 56. I tried testing Firefox 10 but it permahung while loading the profile.</p>
</li>
</ul>
<p>## Start-up Time</p>
<p>Graph of startup time with 1691 tabs across Firefox versions 20, 30, 40 and 50 - 56. The Y axis is <em>minutes</em>. Yes, Firefox 51 took almost <em>8 MINUTES</em> to start up. However, as of Firefox 55 it only takes <em>15 seconds</em>. For 1691 tabs. Really. I no longer fear restarts. Lately, I just restart Firefox for fun sometimes.</p>
<p><picture><source type="image/avif" srcset="/2017/07/21/i-am-a-tab-hoarder/kwXZ19i_hB-958.avif 958w"><source type="image/webp" srcset="/2017/07/21/i-am-a-tab-hoarder/kwXZ19i_hB-958.webp 958w"><img loading="lazy" decoding="async" src="/2017/07/21/i-am-a-tab-hoarder/kwXZ19i_hB-958.png" alt="Startup time" width="958" height="597"></picture></p>
<p>It's interesting that Firefox startup time got consistently <em>worse</em> over time until Firefox 51. It'd be interesting to do this test with varying numbers of tabs and find out at what point these types of regressions become noticeable.</p>
<p>## Memory Usage</p>
<p>Graph of memory use one minute after startup with 1691 tabs across Firefox versions 20, 30, 40 and 50 - 56. While consistently using around two gigs of memory, we've now reduced to <em>less than half a gig</em>. Yes, this is without actual web pages loaded, but look at this, haters: I've now got 1.5 gigs of memory to load web pages into that I didn't have before.</p>
<p><picture><source type="image/avif" srcset="/2017/07/21/i-am-a-tab-hoarder/cUdT1ZEnWI-962.avif 962w"><source type="image/webp" srcset="/2017/07/21/i-am-a-tab-hoarder/cUdT1ZEnWI-962.webp 962w"><img loading="lazy" decoding="async" src="/2017/07/21/i-am-a-tab-hoarder/cUdT1ZEnWI-962.png" alt="Memory use" width="962" height="598"></picture></p>
<p>The efforts that the Firefox and Gecko and Servo teams are putting into making a SUPERFUCKINGFAST browser are having a real impact, and that's exciting to see.</p>


  		</heading-anchors>
  	</main>

  	<footer>
  		<p><em>Built with <a href="https://www.11ty.dev/">Eleventy v3.1.2</a></em></p>
  	</footer>

  	<!-- This page `/2017/07/21/i-am-a-tab-hoarder/` was built on 2026-02-15T19:33:07.048Z -->
  	<script type="module" src="/dist/cC8wS6ZjFU.js"></script>

    <!-- Fathom - beautiful, simple website analytics -->
    <script src="https://cdn.usefathom.com/3.js" site="EIIOBSXT"></script>
    <!-- / Fathom -->

  </body>
</html>
