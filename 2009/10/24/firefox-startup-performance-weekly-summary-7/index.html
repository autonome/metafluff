<!doctype html>
<html lang="en">
  <head>
  	<meta charset="utf-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  	<title>Firefox Startup Performance Weekly Summary</title>
  	<meta name="description" content="website de dietrich ayala">
  	<link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="dietrich likes to do stuff">
  	
  	<style>/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}
/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-20: #e0e0e0;
	--color-gray-50: #C0C0C0;
	--color-gray-90: #333;

	--background-color: #fff;

	--text-color: var(--color-gray-90);
	--text-color-link: #082840;
	--text-color-link-active: #5f2b48;
	--text-color-link-visited: #17050F;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #C0C0C0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}


/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
}
html {
	overflow-y: scroll;
}
body {
	max-width: 100%;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img{
  max-width: 100%;
}
img[width][height] {
  height: auto;
}
img[src$=".svg"] {
  width: 100%;
  height: auto;
  max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
main :first-child {
	margin-top: 0;
}

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: .5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
}
pre:not([class*="language-"]) {
	margin: .5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
}
code {
	word-break: break-all;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: .5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
  display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	list-style: none;
	padding: 0;
	padding-left: 1.5rem;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	content: "" counter(start-from, decimal-leading-zero) ". ";
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	padding-left: .25em;
	padding-right: .5em;
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	text-transform: capitalize;
	font-style: italic;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: .5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}
/* Customizations */
.nav {
  display: flex;  
  flex-wrap: wrap;
}
.nav-item {
  /*display: inline-block;*/
  /*margin-right: 0.3em;*/
  text-wrap: nowrap;
}

/* Post layout - rehome to post section? */
.post-container {
  display: flex;
  justify-content: center;
}
.post-content {
  max-width: 40rem;
  min-width: 0;
}
.postlist-item:before {
  content: none;
}
.postlist-date {
  margin-right: 0.5em;
}

header {
	border-bottom: none;
}
header > .nav-item {
	font-size: 1.5em;
	font-weight: 700;
	text-wrap: wrap;
}
header > .nav-item:link,
header > .nav-item:visited {
	color: var(--text-color);
	text-decoration: none;
}

/* Home page 4-column grid */
.home-grid {
  display: grid;
  grid-template-columns: 8rem 1fr 1fr 1fr;
  gap: 2rem;
  padding: 0;
}
main:has(.home-grid) {
  padding-left: 1em;
  padding-right: 1em;
}

.home-grid h2 {
  margin-top: 0;
}

/* Contact column */
.contact-list {
  list-style: none;
  padding: 0;
}
.contact-list li {
  margin-bottom: 0.5em;
}

/* Talks column */
.talks-list {
  list-style: none;
  padding: 0;
}
.talks-list li {
  margin-bottom: 0.5em;
  line-height: 1.4;
}
.talks-venue {
  display: block;
  font-size: 0.85em;
  color: var(--color-gray-50);
}
.col-talks h3 {
  margin-bottom: 0.5em;
  margin-top: 1.2em;
}
.col-talks h3:first-of-type {
  margin-top: 0;
}

/* Blog column */
.col-blog .postlist {
  padding-left: 0;
}
.col-blog .postlist-item {
  margin-bottom: 0.75em;
}
.col-blog .postlist-link {
  font-size: 1em;
  flex-basis: 100%;
  padding-left: 0;
}

/* Mobile nav items - hidden on desktop */
.mobile-nav-item {
  display: none;
}

@media (max-width: 768px) {
  .home-grid {
    grid-template-columns: 1fr;
  }
  .contact-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5em 1em;
  }
  .contact-list li {
    margin-bottom: 0;
  }
  .col-contact h2 {
    margin-bottom: 0;
  }
  .col-contact {
    margin-bottom: -1.5rem;
  }
  .col-talks,
  .col-blog {
    display: none;
  }
  .mobile-nav-item {
    display: inline-block;
  }
}

/* Color mode management */
/*
body {
  color: var(--darkgray);
  background-color: var(--white);
}
a[href] {
  color: var(--blue);
}
a[href]:visited {
  color: var(--navy);
}
.postlist-date,
.postlist-item:before {
  color: var(--darkgray);
}
.post-tag {
  color: var(--darkgray);
  border-color: var(--gray);
}
a[href].post-tag:hover,
a[href].post-tag:focus {
  background-color: var(--lightgray);
}
@media (prefers-color-scheme: dark) {
  body {
    color: var(--text-color);
    background-color: var(--color-gray-90);
  }
  a[href] {
    color: var(--white);
  }
  a[href]:visited {
    color: var(--lightgray);
  }
  .postlist-date,
  .postlist-item:before {
    color: var(--darkgray);
  }
  .post-tag {
    color: var(--darkgray);
    border-color: var(--gray);
  }
  a[href].post-tag:hover,
  a[href].post-tag:focus {
    background-color: var(--lightgray);
  }
}
*/</style>
  </head>
  <body>
  	<a href="#skip" class="visually-hidden">Skip to main content</a>

  	<header>
  		<a href="/" class="nav-item">dietrich likes to do stuff</a>
  		<nav>
  			<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
  			<ul class="nav">
  				<li class="nav-item"><a href="/posts/">blog</a></li>
  				<li class="nav-item"><a href="/about/">about</a></li>
  				<li class="nav-item mobile-nav-item"><a href="https://autonome.github.io/elephant/">talks</a></li>
  			</ul>

  		</nav>
  	</header>

  	<main id="skip">
  		<heading-anchors>
  			
<h1 id="firefox-startup-performance-weekly-summary">Firefox Startup Performance Weekly Summary</h1>

<ul class="post-metadata">
	<li><time datetime="2009-10-24">24 October 2009</time></li>
	<li><a href="/tags/firefox/" class="post-tag">firefox</a>, </li>
	<li><a href="/tags/mozilla/" class="post-tag">mozilla</a></li>
</ul>

<p>First, the numbers. This is the first round where all the posted numbers are from Talos. We're getting closer to having Windows numbers for cold startup (details further down). The cold numbers didn't have much in the way of results yet, only 3-5 boxes for today's numbers, and given the variability we should probably put more boxes on those. The notable datapoint is that cold startup on Mac for 3.6 is better than for trunk, which is odd since it's been the opposite in all of our manual testing, and most of the big wins haven't made it to the branch yet. It could be because of the dearth of results so far. Next week I'll include the dirty profile test results in these tables as well.</p>
<p>Cold Startup</p>
<table border="1">
<tbody>
<tr>
<td>Platform</td>
<td>3.5</td>
<td>3.6</td>
<td>Trunk</td>
</tr>
<tr>
<td>Mac Leopard (10/23)</td>
<td>15605ms</td>
<td>13120ms (-16\%)</td>
<td>13859ms (-11\%)</td>
</tr>
<tr>
<td>Win XP</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Win Vista</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Linux (10/23)</td>
<td>7056ms</td>
<td>7159ms (1\%)</td>
<td>7204ms (2\%)</td>
</tr>
</tbody></table>
Warm Startup
<table border="1">
<tbody>
<tr>
<td>Platform</td>
<td>3.5</td>
<td>3.6</td>
<td>Trunk</td>
</tr>
<tr>
<td>Mac Leopard (10/23)</td>
<td>1451ms</td>
<td>1108ms (-23\%)</td>
<td>1017ms (-30\%)</td>
</tr>
<tr>
<td>Win XP (10/23)</td>
<td>459ms</td>
<td>462ms (0\%)</td>
<td>449ms  (-2\%)</td>
</tr>
<tr>
<td>Win Vista (10/23)</td>
<td>535ms</td>
<td>544ms (1\%)</td>
<td>506ms (-5\%)</td>
</tr>
<tr>
<td>Linux (10/23)</td>
<td>625ms</td>
<td>632ms (1\%)</td>
<td>629ms  (0\%)</td>
</tr>
</tbody></table>
As usual, more details and links are  available on [the    project wiki](https://wiki.mozilla.org/Firefox/Projects/Startup_Time_Improvements), and we're available to answer questions in [\#startup on irc.mozilla.org](irc://irc.mozilla.org/\#startup).
<ul>
<li>
<p>Taras is zooming in on library IO, and <a href="http://blog.mozilla.com/tglek/2009/10/20/large-apps-just-have-to-start-slow/">posted some details and optimization approaches</a>, and<a href="http://blog.mozilla.com/tglek/2009/10/23/studying-library-io-systemtap-style/"> today posted a log</a> of what's loaded and how long it takes.</p>
</li>
<li>
<p>Windows Cold Ts: As you can see above in the table, the new cold startup graphs are here for <a href="http://tinyurl.com/2vr3pz">Mac </a>and <a href="http://tinyurl.com/2vr3pz">Linux</a>. I've made progress on emulating cold startup on Windows using a utility from the Windows Server 2003 Resource Kit called Consume.exe. I found a reference to it in some random blog comment, and then<a href="https://developer.mozilla.org/en/QA/Stress_Testing"> found it on MDC</a> as the #2 link on Google. The help file that the resource kit installer links from the start menu  is... not actualy there, but I did find some <a href="http://www.windows-management.com/msk-rk/win2003/0127/">tidbits of  documentation</a>. It will consume one of physical memory, cpu time, <a href="http://blogs.technet.com/askperf/archive/2007/03/07/memory-management-understanding-pool-resources.aspx">kernel pool memory</a>, disk space (!) and the page file, for the number of seconds specified by the user. Running consume.exe for 15 seconds was enough to completely exhaust my physical ram, and subsequent starts of Firefox trunk are about 22 seconds. Next steps: I'll continue to test to see what combination of these options gives us the best visibility into changes to cold startup time, and then work with Rel/Eng to get it deployed.</p>
</li>
<li>
<p>Alfred Kayser landed <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=511754">bug  511754</a>, which improves JAR file reading efficiency.</p>
</li>
<li>
<p>Rob Strong has been making a bunch of changes in the update system to improve startup time, and <a href="http://blog.mozilla.com/rstrong/2009/10/23/app-update-status/">posted a list of the changes</a>.</p>
</li>
<li>
<p>Drew has a patch up for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506814">bug  506814</a>, getting rid of Change   GetPersistentDescriptor/SetPersistentDescriptor on Mac, just needs review from Josh.</p>
</li>
<li>
<p>Peter got review on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=512645">bug 542615</a>, removing the setTimeout 10ms wait in chrome JS.</p>
</li>
<li>
<p>Ben Hsieh has been prototyping a whole Fastload cache replacement in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=520309">bug 520309</a>.</p>
</li>
<li>
<p>Ben's work on fastload cache invalidation in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=511761">bug 511761</a> closed other bugs such as <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=517515">bug 517515</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=512827">bug 512827</a>.</p>
</li>
<li>
<p>Ted has been looking at re-enabling rebasing on Windows in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=484799">bug 484799</a> for a potential performance boost there.
Projects in a holding pattern:</p>
</li>
<li>
<p>Service caching work in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=516085">bug       516085</a> still needs to be pushed  to  the  Places branch for testing.</p>
</li>
<li>
<p>Moving font-loading out of the startup path on Mac: Jonathan Kew   filed <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=519445">bug     519445</a> with a WIP patch for yet further reductions in Mac startup     time spent in font system initialization.</p>
</li>
<li>
<p>JARification: David abandoned <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=509755">moving JS        modules into a JAR file</a>, since those files are fastloaded.       However, since we want things like post-extension-install restarts to   be     fast, and those cause fastload cache invalidation, we might  want  to   do   things like this anyways. I filed a bug for the same  treatment  for     components. These are lower priority, since they're  not the  normal     startup case. Follow along with all JAR-ification  via<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513027"> the       tracker  bug</a>.</p>
</li>
<li>
<p>Startup Timeline: No updates, still not landed. Add [ft] in the      whiteboard of your bug w/ the function names you want timed and David      will generate it and update the bug.</p>
</li>
<li>
<p>Static Analysis: No progress on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506128">bug      506128</a>.  David needs to file a bug with the final log of      named-yet-uncalled  functions.</p>
</li>
<li>
<p>Dirty Profile Testing: No progress. Need to list scenarios, file      bugs  for each, generate Talos config patches and profile data, and  then     move  it into Rel-Eng territory. Also, need to get a separate     Tinderbox  tree,  since it's going to cause a bazillion new columns.</p>
</li>
<li>
<p><a href="http://wagerlabs.com/">Joel      Reymont</a> noted in<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513076"> bug      513076</a> that there are serious drawbacks to getting our libraries in      the dyld  shared cache on Mac, so has deprioritized that work.</p>
</li>
<li>
<p>No updates on Zack's CSS parser changes in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513149">bug        513149</a>.</p>
</li>
</ul>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/2009/10/17/firefox-startup-performance-weekly-summary-6/">Firefox Startup Performance Weekly Summary</a></li><li class="links-nextprev-next">Next →<br><a href="/2009/10/31/firefox-startup-performance-weekly-summary-8/">Firefox Startup Performance Weekly Summary</a></li>
</ul>

  		</heading-anchors>
  	</main>

  	<footer>
  		<p><em>Built with <a href="https://www.11ty.dev/">Eleventy v3.1.2</a></em></p>
  	</footer>

  	<!-- This page `/2009/10/24/firefox-startup-performance-weekly-summary-7/` was built on 2026-02-17T17:33:12.960Z -->
  	<script type="module" src="/dist/cC8wS6ZjFU.js"></script>

    <!-- Fathom - beautiful, simple website analytics -->
    <script src="https://cdn.usefathom.com/3.js" site="EIIOBSXT"></script>
    <!-- / Fathom -->

  </body>
</html>
