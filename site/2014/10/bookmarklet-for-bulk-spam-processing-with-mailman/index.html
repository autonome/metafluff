<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Bookmarklet for Bulk Spam Processing with Mailman</title>
    <meta name="description" content="Dietrich Ayala is a developer relationist working for internet freedom at Mozilla, the non-profit makers of Firefox." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/custom.css" />

    <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="Dietrich Ayala" href="/rss/index.xml">
<link rel="canonical" href="/2014/10/bookmarklet-for-bulk-spam-processing-with-mailman/" />
</head>
<body class="author-template author- post-template nav-closed">

    

    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
    </nav>
</header>

<main class="content" role="main">
    <article class="post">

        <header class="post-header">
            <h1 class="post-title">Bookmarklet for Bulk Spam Processing with Mailman</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2014-10-19">19 October 2014</time> 
            </section>
        </header>

        <section class="post-content">
            <p>We use Mailman for mailing list management at Mozilla. However, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=983758">we haven&#39;t been able to control spam on those lists</a>. Not only does spam not get caught before hitting Mailman, the built-in spam rules don&#39;t work - I configured the rules to discard anything above spam level 1, and tons of spam is still held for moderation. But identification <em>does</em> work... so we can just ignore the moderation queue forever and move on with life, right? No. Because we have another problem: The newsgroups support means that valid posts might be held for processing because Mailman doesn&#39;t know the sender is valid because they subscribed through Google Groups. So we have to view the lists and mark those messages as valid and add the sender to the valid-senders list. To cap it all off, in the long tradition of open source user interface design, Mailman has a full featured but RSI-inducing UI for managing all of this.</p>
<p>So if you&#39;re an admin for a bunch of Mailman lists, here&#39;s a mitigation that might make your day suck just a little bit less:</p>
<p>I wrote a bookmarklet that will do the following for all messages held for moderation:</p>
<ul>
<li>Select the radio button to discard the message</li>
<li>Check the box to auto-discard from that sender</li>
<li>Check the box to ban the sender from ever subscribing again
<del><strong>To install, drag this link to your bookmarks Toolbar: <a>Mailman - discard and ban all</a></strong></del></li>
</ul>
<p>Wordpress removes JavaScript in links, so create a new bookmark and copy the following code into the URL field:</p>
<p><code>javascript:function%20qsa(e){return[].slice.call(document.querySelectorAll(e))}qsa(%22input[type=RADIO][name^=senderaction]%22).forEach(function(e){e.checked=!0}),qsa(%22input[type=CHECKBOX][name^=senderfilter]%22).forEach(function(e){e.checked=!0}),qsa(%22input[type=CHECKBOX][name^=senderbanp]%22).forEach(function(e){e.checked=!0});</code></p>
<p>Remember to make VERY sure that none of the messages are valid before executing this bookmarklet... not only because valid messages will be discarded and their senders will be banned, but also because the UI for removing addresses from the block-list in Mailman is even worse than the one for moderation.</p>

        </section>

        <footer class="post-footer">

        <!---->

            <figure class="author-image">
                <a class="img" href="/author//" style="background-image: url(https://en.gravatar.com/userimage/267418/71bda5b5ec91b98ad14f93bcf37098d3.png)"><span class="hidden">Dietrich Ayala's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="/author//">Dietrich Ayala</a></h4>

                    <p>Dietrich Ayala is a developer relationist working for internet freedom at Mozilla, the non-profit makers of Firefox.</p>
                <div class="author-meta">
                    <span class="author-location icon-location"> </span>
                    <span class="author-link icon-link"><a href="http://metafluff.com">http://metafluff.com</a></span>
                </div>
            </section>


        </footer>

    </article>
</main>

<aside class="read-next">
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="/">Dietrich Ayala</a> &copy; 2014</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <!--<script type="text/javascript" src="//code.jquery.com/jquery-1.12.0.min.js"></script>-->
    <script src="/assets/js/jquery.min.js"></script>
    <!--<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>-->
    <!--<script type="text/javascript" src="/assets/js/index.js"></script>-->

	<script type="text/javascript">
		var _gauges = _gauges || [];
		(function() {
			var t   = document.createElement('script');
			t.type  = 'text/javascript';
			t.async = true;
			t.id    = 'gauges-tracker';
			t.setAttribute('data-site-id', '598429df7218b52c910d4d28');
			t.setAttribute('data-track-path', 'https://track.gaug.es/track.gif');
			t.src = 'https://d36ee2fcip1434.cloudfront.net/track.js';
			var s = document.getElementsByTagName('script')[0];
			s.parentNode.insertBefore(t, s);
		})();
	</script>


<!-- Matomo -->
<script type="text/javascript">
  var _paq = _paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://metafluff.innocraft.cloud/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->

	<script type="text/javascript">
    var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '598429df7218b52c910d4d28');
      t.setAttribute('data-track-path', 'https://track.gaug.es/track.gif');
      t.src = 'https://d36ee2fcip1434.cloudfront.net/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
  </script>

</body>
</html>
