<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Dietrich Ayala - Dietrich Ayala</title>
    <meta name="description" content="Dietrich Ayala is a developer relationist working for internet freedom at Mozilla, the non-profit makers of Firefox." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/custom.css" />

    <meta name="generator" content="Ghost ?" />
<link rel="alternate" type="application/rss+xml" title="Dietrich Ayala" href="/rss/index.xml">
<link rel="canonical" href="/2010/01/firefox-startup-performance-january-22/index.html" />
</head>
<body class="author-template author- post-template tag-firefox tag-firefox tag-mozilla tag-mozilla tag-performance tag-startup nav-closed">

    

    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-firefox tag-firefox tag-mozilla tag-mozilla tag-performance tag-startup">

        <header class="post-header">
            <h1 class="post-title">Firefox Startup Performance - January 22</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2010-01-22">22 January 2010</time>  on <a href="/tag/firefox/">firefox</a>, <a href="/tag/firefox/">firefox</a>, <a href="/tag/mozilla/">mozilla</a>, <a href="/tag/mozilla/">mozilla</a>, <a href="/tag/performance/">Performance</a>, <a href="/tag/startup/">startup</a>
            </section>
        </header>

        <section class="post-content">
            <p>A good week: Firefox 3.6 was released, and I&#39;ve gotten a lot of feedback from friends and colleagues that startup has improved, and that it&#39;s snappier than ever. Yesterday I blogged <a href="http://autonome.wordpress.com/2010/01/21/firefox-3-6-performance-startup-and-snappiness-improvements/">a roundup of the performance improvements in Firefox 3.6</a>.</p>
<p>Top Startup Bugs
<!-- table#ts { border: 1px solid silver; } --></p>
<p><table id="ts" border="1" cellspacing="0" cellpadding="2"></p>
<p><tbody></p>
<p><tr></p>
<p><td class="s0">Estimated win</td></p>
<p><td class="s1">Bug #</td></p>
<p><td class="s1">Summary</td></p>
<p><td class="s1">Owner</td></p>
<p><td class="s1">Status</td></p>
<p><td class="s1">Notes</td>
</tr></p>
<p><tr></p>
<p><td class="s2">&gt;10%</td></p>
<p><td class="s3"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=512584">512584</a></td></p>
<p><td class="s4">Super fast paths for Components.classes and Components.interfaces</td></p>
<p><td class="s4">Taras Glek</td></p>
<p><td class="s4">in progress</td></p>
<p><td>Taras is traveling, says he&#39;ll close it out when he returns.</td>
</tr></p>
<p><tr></p>
<p><td class="s2">&gt;10%</td></p>
<p><td class="s3"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=525013">525013</a></td></p>
<p><td class="s4">Investigate a more static build configuration of Firefox</td></p>
<p><td class="s4">Joel Reymont</td></p>
<p><td class="s4">in progress</td></p>
<p><td class="s4">More great data from Zack and Joel. See PDF charts of the different build configurations tested on different hard-drive speeds for <a href="https://bugzilla.mozilla.org/attachment.cgi?id=422607">Mac</a> and for <a href="https://bugzilla.mozilla.org/attachment.cgi?id=423007">Linux</a>.</td>
</tr></p>
<p><tr></p>
<p><td class="s2">up to 25%</td></p>
<p><td class="s3"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=514083">514083</a></td></p>
<p><td class="s4">Per-file HFS+ compression on Mac OSX 10.6</td></p>
<p><td class="s4">Joel Reymont</td></p>
<p><td class="s4">in progress</td></p>
<p><td class="s4">Conclusion is that we need to make this happen via the installer, as well as the updater, since modifying files results in decompression. Need to find an owner for this still.</td>
</tr></p>
<p><tr></p>
<p><td class="s2">TBD</td></p>
<p><td class="s3"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=520309">520309</a></td></p>
<p><td class="s4">Startup cache: replacement for fastload cache</td></p>
<p><td class="s4">Ben Hsieh</td></p>
<p><td class="s4">in progress</td></p>
<p><td class="s4">Considering moving back to the simpler caching approach.</td>
</tr></p>
<p><tr></p>
<p><td class="s2">TBD</td></p>
<p><td class="s3"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=503483">503483</a></td></p>
<p><td class="s4">Turn on --enable-faststart for Firefox by default</td></p>
<p><td class="s4">Dietrich</td></p>
<p><td class="s4">needs testing</td></p>
<p><td class="s4">Started talking with Rob Strong about making the changes to the NSIS installer to make this happen.</td>
</tr></p>
<p><tr></p>
<p><td class="s2">TBD</td></p>
<p><td class="s3"><a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513149">513149</a></td></p>
<p><td class="s4">Speed up CSS parsing by using a machine generated lexer</td></p>
<p><td class="s4">Zack Weinberg</td></p>
<p><td class="s4">Zack&#39;s blocked on other work</td></p>
<p><td class="s4">No update.Taras says about 6% of startup spent parsing CSS.</td>
</tr>
</tbody>
</table>
Other activity this week:</p>
<ul>
<li>Of the bugs I filed as a result of the JS profiling data (<a href="http://spreadsheets.google.com/pub?key=t98ryMyoZx3Su0Pw7wz0anQ&amp;output=html">ranked log</a>, <a href="http://people.mozilla.org/~dietrich/startup-js-win.txt">stack view</a>), we closed out <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=539991">bug 539991</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=539870">bug  539870</a>, and have owners and patches on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=539869">bug 539869</a> and <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=539997">bug  539997</a>.</li>
<li>I figured out the leak on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506471">bug 506471</a>, to move FUEL out of the startup path, and will have review soon.</li>
<li>Taras posted <a href="http://blog.mozilla.com/tglek/2010/01/19/chromium-vs-minefield-cold-startup-performance-comparison/">a comparison of the startup time on Linux with a new profile for Chromium and Minefield</a>. Good data... for Linux users, but the lesson here is that we urgently need a canonical dirty profile to test with. I&#39;m going to get with the Test Pilot folks to see about gathering the data to do this.</li>
<li><p>Also, I found another post from Taras that I missed while I was out for the holidays, detailing the problems with <a href="http://blog.mozilla.com/tglek/2010/01/04/windows-7-startup-exploration/">measuring cold startup on Windows</a>.
Projects in a holding pattern:</p>
</li>
<li><p>More investigation into Hunspell changes in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=468779">bug  468799</a>, possibly incorporating some changes Chrome made.</p>
</li>
<li>Ryan Flint has a WIP patch to minify JS on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=524858">bug  524858</a> that significantly reduces the size of shipped JavaScript  files.</li>
<li>JARification: David abandoned <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=509755">moving JS          modules into a JAR file</a>, since those files are fastloaded.         However, since we want things like post-extension-install  restarts  to   be     fast, and those cause fastload cache invalidation,  we might   want  to   do   things like this anyways. I filed a bug for  the same   treatment  for     components. These are lower priority,  since they&#39;re   not the  normal     startup case. Follow along with all  JAR-ification   via<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513027"> the         tracker  bug</a>.</li>
<li>Startup Timeline: No updates, still not landed. Add [ft] in the        whiteboard of your bug w/ the function names you want timed and David        will generate it and update the bug.</li>
<li>Static Analysis: No progress on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=506128">bug        506128</a>.  David needs to file a bug with the final log of        named-yet-uncalled  functions.</li>
<li>Dirty Profile Testing: No progress. We have <a href="https://wiki.mozilla.org/Firefox/Sprints/Startup_Time_Improvements#Test_Coverage">a list of test scenarios</a>, still need to file        bugs  for each, generate Talos config patches and profile data, and    then     move  it into Rel-Eng territory. Also, need to get a separate       Tinderbox  tree,  since it&#39;s going to cause a bazillion new  columns.</li>
<li><a href="http://wagerlabs.com/">Joel        Reymont</a> noted in<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=513076"> bug        513076</a> that there are serious drawbacks to getting our libraries  in       the dyld  shared cache on Mac, so has deprioritized that work.
As usual, more details and links are  available on <a href="https://wiki.mozilla.org/Firefox/Projects/Startup_Time_Improvements">the       project wiki</a>, and we&#39;re available to answer questions in <a href="irc://irc.mozilla.org/#startup">#startup on irc.mozilla.org</a>.</li>
</ul>

        </section>

        <footer class="post-footer">

        <!---->

            <figure class="author-image">
                <a class="img" href="/author//" style="background-image: url(https://en.gravatar.com/userimage/267418/33bd1644f6fe171d2b6f70af96c86185.jpeg)"><span class="hidden">Dietrich Ayala's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="/author//">Dietrich Ayala</a></h4>

                    <p>Dietrich Ayala is a developer relationist working for internet freedom at Mozilla, the non-profit makers of Firefox.</p>
                <div class="author-meta">
                    <span class="author-location icon-location"> </span>
                    <span class="author-link icon-link"><a href="http://metafluff.com">http://metafluff.com</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Firefox%20Startup%20Performance%20-%20January%2022&amp;url=/2010/01/firefox-startup-performance-january-22/index.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=/2010/01/firefox-startup-performance-january-22/index.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=/2010/01/firefox-startup-performance-january-22/index.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>


        </footer>

    </article>
</main>

<aside class="read-next">
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="/">Dietrich Ayala</a> &copy; 2010</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <!--<script type="text/javascript" src="//code.jquery.com/jquery-1.12.0.min.js"></script>-->
    <script src="/assets/js/jquery.min.js"></script>
    <!--<script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>-->
    <!--<script type="text/javascript" src="/assets/js/index.js"></script>-->

	<script type="text/javascript">
		var _gauges = _gauges || [];
		(function() {
			var t   = document.createElement('script');
			t.type  = 'text/javascript';
			t.async = true;
			t.id    = 'gauges-tracker';
			t.setAttribute('data-site-id', '598429df7218b52c910d4d28');
			t.setAttribute('data-track-path', 'https://track.gaug.es/track.gif');
			t.src = 'https://d36ee2fcip1434.cloudfront.net/track.js';
			var s = document.getElementsByTagName('script')[0];
			s.parentNode.insertBefore(t, s);
		})();
	</script>

</body>
</html>
